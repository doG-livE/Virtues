<html>
    <head>
        <!--jQuery-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <title>VICE development</title>
    </head>
    <script>
        const chatURL = "wss://h86xupi032.execute-api.us-east-2.amazonaws.com/dev/";
        let socket = new WebSocket(chatURL);
        console.log(socket);
        // send message from the form
        function sendMessage(_message){
            let outgoingMessage = this.message.value;
            socket.send(outgoingMessage);
            console.log(_message+" -  sent")
            return false;        
        }
/*
        document.forms.publish.onsubmit = function() {
        let outgoingMessage = this.message.value;

        socket.send(outgoingMessage);
        return false;
        };
*/

        // message received - show the message in div#messages
        socket.onmessage = function(event) {
        let message = event.data;

        let messageElem = document.createElement('div');
        messageElem.textContent = message;
        document.getElementById('messages').prepend(messageElem);
        }
    </script>

    <body>
       <!-- message form -->
<form name="publish">
    <input type="text" name="message" id="message">
    <!--<input type="submit" value="Send" onclick="sendMessage($('#imessage.val()))">-->
    <button type="button" onclick="sendMessage($('#message').val())">Send</button></input>
  </form>
  
  <!-- div with messages -->
  <div id="messages"></div>
    </body>
</html>